package DataLayer;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;

import DataLayer.Components.CustomerData;
import DataLayer.Components.Rental;
import DataLayer.Components.Video;

public class Data {
	private ArrayList<Int> videos;
	private ArrayList<Rental> rentals;
	private float rate = 1.99F;
	
	public Data() {
		loadBackUp();
	}
	
	public Data(ArrayList<Int> videos, ArrayList<Rental> rentals, float rate) {
		super();
		this.videos = videos;
		this.rentals = rentals;
		this.rate = rate;
	}
	
	private void loadBackUp() {
		    BufferedReader reader;
			try {
				reader = new BufferedReader(new FileReader("videosBackUp.txt"));
				String line;
				while ((line = reader.readLine()) != null)
				{
					Video video = new Video(line);
					videos.add(video);
				}
				reader.close();
				
				reader = new BufferedReader(new FileReader("rentalsBackUp.txt"));
				while ((line = reader.readLine()) != null)
				{
					String [] strArr = line.split(";");
					CustomerData customer = new CustomerData(Integer.parseInt(strArr[0]),strArr[1],strArr[2],strArr[3],strArr[4]);
					SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
					
					Date rentalDate = sdf.parse(strArr[5]);
					Calendar calendarRent = Calendar.getInstance();
					calendarRent.setTime(rentalDate);
					
					Date rentalExpireDate = sdf.parse(strArr[6]);
					Calendar calendarExpire = Calendar.getInstance();
					calendarExpire.setTime(rentalExpireDate);
					
					for(int i = Integer.parseInt(strArr[7]) ; i>0 ; i--) {
						
					}
					
				}
				reader.close();
			} catch (Exception e) {
				e.printStackTrace();
			}
	}
	
	public void addRental(Rental rental) {
		rentals.add(rental);
	}
	
}
